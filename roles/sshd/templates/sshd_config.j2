#jinja2: trim_blocks: True, lstrip_blocks: True
{{ ansible_managed | comment }}

Include {{ sshd__conf_includedir | mandatory }}/*.conf

Port {{ sshd__port | mandaroty }}
{% if sshd__listen_address is defined %}
ListenAddress {{ sshd__listen_address | mandatory }}
{% endif %}

HostKey /etc/ssh/ssh_host_ed25519_key
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key

PubkeyAuthentication yes
UsePAM yes
PasswordAuthentication {{ sshd__password_authentication | mandatory }}
PermitEmptyPasswords no
PermitRootLogin {{ sshd__permit_root_login | mandatory }}
ChallengeResponseAuthentication no
KbdInteractiveAuthentication no

LogLevel VERBOSE

PrintMotd no
PrintLastLog yes

AcceptEnv LANG LC_*

Subsystem   sftp    /usr/lib/openssh/sftp-server -f AUTHPRIV -l INFO
