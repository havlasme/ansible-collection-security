---
- name: 'Install | {{ (nftables__state == "absent") | ternary("Uninstall", "Install or Update") }} the NFTables via APT'
  ansible.builtin.apt:
    name: '{{ nftables__package_name }}'
    update_cache: '{{ nftables__state != "absent" }}'
    cache_valid_time: 1800
    state: '{{ nftables__state }}'
  notify:
  - 'NFTables | Validate Conf and Restart Service'

- name: 'Install | Create the NFTables Conf Directory Structure'
  ansible.builtin.file:
    name: '{{ nftables__confdir }}'
    owner: 'root'
    group: 'root'
    mode: '0755'
    state: 'directory'
  notify:
  - 'NFTables | Validate Conf and Reload Service'
  when:
  - nftables__state != 'absent'
...
